{% extends "layout.html" %}
{% block title %}{{config.LEMA}}{% endblock %}
{% block navbar %}
<ul class="right">
  <li class="large"><a href="{{url_for('view_user', user=user.name)}}" class="btn">/u/{{user.name}}</a></li>
</ul>
{% endblock %}
{% block sidebar %}
{{ super() }}
<hr/>
<div>
  <h3>Badges:</h3>
  <ul id="userBadges" style="color: darkcyan;">
    {% if user.name == 'v' %}<li>\o/ Cheerleader</li>{% endif %}
    {% for badge in badges if badges|length > 0 %}
    <div class="ubadge">
      <li title="{{badge.getBadgeText}}"><i class="fa {{badge.getBadgeClass}}"></i> {{badge.getBadgeName}}
      {% if current_user.is_admin() %}
      <span id="removebadge" data-bid="{{badge.value}}" data-uid="{{user.uid}}" class="removebadge btn">remove {{badge.getBadgeName}}</span>
      {% endif %}
      </li>
    </div>
    {% else %}
    <li>none</li>
    {% endfor %}
  </ul>
</div>
<hr>
<div>
  <h3>Owns:</h3>
  <ul style="color: darkcyan;">
    {% for own in owns if owns|length > 0 %}
    <li><a href="{{url_for('view_sub', sub=own.getSubName)}}">{{own.getSubName}}</a></li>
    {% else %}
    <li>none</li>
    {% endfor %}
  </ul>
</div>
<hr>
<div>
  <h3>Mods:</h3>
  <ul style="color: darkcyan;">
    {% for mod in mods if mods|length > 0 %}
    <li><a href="{{url_for('view_sub', sub=mod.getSubName)}}">{{mod.getSubName}}</a></li>
    {% else %}
    <li>none</li>
    {% endfor %}
  </ul>
  <hr>
  <p class="joindate">User has made {{pcount}} posts<br>and {{ccount}} comments since<br>registered <time-ago datetime="{{ user.joindate.isoformat() }}"></time-ago></p>
</div>
{% endblock %}
{% block content %}
{{ super() }}
<div class="edituser">
  {% if current_user.is_admin() %}
  <div class="adminbadges col-12 admin-page-form">
    <div class=""><h3>Admin options</h3></div>
    <div class="col-12"><h2><i class="fa fa-beer"></i> Assign User Badge</h2>
      {% for badge in adminbadges %}
      <div id="assignbadge" class="col-3 btn" data-bid="{{badge.bid}}" data-uid="{{user.uid}}">{{loop.index}} - <i title="{{badge.text}}" class="fa {{badge.badge}}"></i> {{badge.name}}</div>
      {% endfor %}
    </div>
  </div>
  {% endif %}

  <h1>Edit info for {{user.name}}</h1>
  <form id="edit-user-form"  data-user="{{user.name}}" class="">
      <div id="the-edit-user-form-itself">
          {{edituserform.csrf_token}}

          <p><label for="email" class="left">{{edituserform.email.label.text}}</label>{{edituserform.email(value=user.email, class="right")}}</p>
          <p>{{edituserform.external_links(checked=user.showLinksNewTab)}}<label for="external_links">{{edituserform.external_links.label.text}}</label></p>
          <p>{{edituserform.disable_sub_style(checked=user.showStyles)}}<label for="disable_sub_style">{{edituserform.disable_sub_style.label.text}}</label></p>
          <p>{{edituserform.show_nsfw(checked=user.showNSFW)}}<label for="show_nsfw">{{edituserform.show_nsfw.label.text}}</label></p>
          {{edituserform.recaptcha}}
          <div class="alert div-error">
            <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
            <p></p>
          </div>
          <p><button type="submit" class="btn btn-blue" id="edituser-btnsubmit">Edit user</button></p>
      </div>
  </form>
</div>

{% endblock %}
