{% extends "layout.html" %}
{% block title %}Subs | {{config.LEMA}}{% endblock %}
{% block navbar %}
<ul class="right">
  <li class="large">Subs</li>
</ul>
{% endblock %}

{% block sidebar %}
{{ super() }}
<div class="row buttons">
  <div class="col-12">
    <a href="{{url_for('view_mymodded_subs')}}" class="btn btn-orange" style="width:100%;">My subs</a>
  </div>
  <div class="col-12">
    <a href="{{url_for('view_my_subs')}}" class="btn btn-orange" style="width:100%;">Subscribed subs</a>
  </div>
  <div class="col-12">
    <a href="{{url_for('view_myblocked_subs')}}" class="btn btn-orange" style="width:100%;">Blocked subs</a>
  </div>
  <div class="col-12">
    <a href="{{url_for('view_my_multis')}}" class="btn btn-orange" style="width:100%;">My Multis</a>
  </div>
</div>
<span class="col-12"><hr></span>
<div class="row buttons">
  <div class="col-12">
    <a data-user="{{current_user.get_username()}}" class="unsubsfromallsubs btn btn-orange" style="width:100%;">Reset ALL Subscribed Subs</a>
  </div>
</div>
{% endblock %}

{% block content %}
{{ super() }}
{% if not subs %}<h1 class="noshit">There are no subs here, yet.</h1>{% endif %}
{% for sub in subs %}
    <article class="col-5 post" data-sid="{{sub.sid}}" style="float:left">
      <div class="main">
        <a class="title" href="{{url_for('view_sub', sub=func.getSub(sub.sid).name)}}">{{func.getSub(sub.sid).name}}</a>
        <p class="author">{% if func.getSub(sub.sid).nsfw  %}<span class="btn small" style="color:white;background:red">nsfw</span>{% endif %} {{func.getSub(sub.sid).title}}</p>
        <p class="author">Created by {{func.getSubUsers(sub, 'mod')}} <time-ago datetime="{{func.getSubCreation(sub)}}Z"></time-ago></p>
        <p class="container">
          <a class="btn small"><i class="fa fa-users" aria-hidden="true"></i> {{getSuscriberCount(sub)}}</a>
          {% if current_user.has_subscribed(sub.sid) %}
          <span id="subscribe" class="subscribed" data-sid="{{sub.sid}}"><a class="btn small"><i class="fa fa-check" aria-hidden="true"></i> Subscribed</a></span>
          {% else %}
          <span id="subscribe" class="unsubscribed" data-sid="{{sub.sid}}"><a class="btn small"><i class="fa fa-plus" aria-hidden="true"></i> Subscribe</a></span>
          {% endif %}
          {% if current_user.has_blocked(sub.sid) %}
          <span id="block" class="blocked" data-sid="{{sub.sid}}"><a class="btn small"><i class="fa fa-check" aria-hidden="true"></i> Blocked</a></span>
          {% else %}
          <span id="block" class="unblocked" data-sid="{{sub.sid}}"><a class="btn small"><i class="fa fa-remove" aria-hidden="true"></i> Block</a></span>
          {% endif %}
        </p>
      </div>
    </article>
{% endfor %}

{% endblock %}
{%block pagefoot%}
{%endblock%}
