{% extends "layout.html" %}
{% block title %}{{config.LEMA}}{% endblock %}
{% block navbar %}
<ul class="right">
  <li class="large"><a href="{{url_for('view_sub', sub=sub.name)}}">/s/{{sub.name}}</a></li>
</ul>
{% endblock %}
{% block content %}
{{ super() }}

{% if not current_user.is_mod(sub.sid) and current_user.is_admin() %}
<center><h3>Editing as Admin</h3></center>
{% endif %}

<h1>Editing /s/{{sub.name}}'s flairs</h1>
<div class="col-12 admin-page-form">
  <form  method="POST" class="ajaxform nice-form" action="{{url_for('do.create_flair', sub=sub.name)}}" data-reload="true">
    <h4>Create new flair</h4>
    {{createflair.csrf_token}}
    <div class="col-10">
      {{createflair.text(placeholder="Flair text")}}
    </div>
    <div class="col-2">
      <button type="submit" class="btn btn-blue" id="editsub-btnsubmit" data-prog="Saving..." data-success="Saved!">Add flair</button>
    </div>
    <div class="alert div-error col-10">
      <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
      <p></p>
    </div>
  </form>
</div>

{% if flairs %}
  <div class="col-12 admin-page-form">
    {% for flair in flairs %}
      <form  method="POST" action="{{url_for('do.edit_flair', sub=sub.name)}}" class="nice-form ajaxform">
        {{flair.csrf_token}}
        {{flair.flair}}
        <div class="col-10">
          {{flair.text(placeholder="Flair text")}}
        </div>
        <div class="col-1">
          <button type="submit" class="btn btn-blue" id="editsub-btnsubmit" data-prog="Saving..." data-success="Saved!">Save</button>
        </div>

        <div class="alert div-error col-10">
          <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
          <p></p>
        </div>
      </form>
      <form  method="POST" data-reload="true" action="{{url_for('do.delete_flair', sub=sub.name)}}" class="nice-form ajaxform">
        {{flair.csrf_token}}{{flair.flair}}
        <div class="col-1">
          <button type="submit" class="btn btn-orange" id="editsub-btnsubmit" data-prog="Deleting..." data-success="Deleted!">Delete</button>
        </div>
        <div class="alert div-error col-10">
          <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
          <p></p>
        </div>
      </form>
    {% endfor %}
  </div>
{% endif %}
{% endblock %}
