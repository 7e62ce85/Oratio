{% extends "layout.html" %}
{% block title %}{{config.LEMA}}{% endblock %}
{% block sidebar %}
{{ super() }}
<div class="row buttons">
  <div class="col-12">
    <a href="{{url_for('view_mymodded_subs')}}" class="btn btn-orange" style="width:100%;">My subs</a>
  </div>
  <div class="col-12">
    <a href="{{url_for('view_my_subs')}}" class="btn btn-orange" style="width:100%;">Subscribed subs</a>
  </div>
  <div class="col-12">
    <a href="{{url_for('view_myblocked_subs')}}" class="btn btn-orange" style="width:100%;">Blocked subs</a>
  </div>
  <div class="col-12">
    <a href="{{url_for('view_my_multis')}}" class="btn btn-orange" style="width:100%;">My Multis</a>
  </div>
</div>
{% endblock %}

{% block content %}
{{ super() }}
<h1>My Multis</h1>
<div class="col-12">
  <table class="col-12">
    <tr>
      <td>Link<td>
      <td>Subs<td>
    </tr>
    {% for multi in multilist %}
    <tr>
      <td><a href="{{url_for('view_usermultisub_new', subs=multi.mid)}}">{{url_for('view_usermultisub_new', subs=multi.mid)}}</a><td>
      <td class="submultilist">{{multi.subs}}<td>
    </tr>
    {% endfor %}
  </table>
</div>
<div class="col-12"><hr></div>
<div class="col-12 admin-page-form">
  <form  method="POST" class="ajaxform nice-form" action="{{url_for('do.create_multi')}}" data-reload="true">
    <h4>Create new multi</h4>
    {{createmulti.csrf_token}}
    <div class="col-2">
      {{createmulti.name(placeholder="Nickname")}}
    </div>
    <div class="col-8">
      {{createmulti.subs(placeholder="sub1+sub2+sub3+sub4")}}
    </div>
    <div class="col-2">
      <button type="submit" class="btn btn-blue" id="editsub-btnsubmit" data-prog="Saving..." data-success="Saved!">Add multi</button>
    </div>
    <div class="alert div-error col-10">
      <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
      <p></p>
    </div>
  </form>
</div>

{% if multis %}
  <div class="col-12">
    {% for multi in multis %}
    <span class="col-10" style="margin:6px 0">
      <form  method="POST" action="{{url_for('do.edit_multi')}}" class="nice-form ajaxform">
        {{multi.csrf_token}}
        {{multi.multi}}
        <div class="col-2">
          {{multi.name()}}
        </div>
        <div class="col-8">
          {{multi.subs()}}
        </div>
        <div class="col-1">
          <button type="submit" class="btn btn-blue" id="editmulti-btnsubmit" data-prog="Saving..." data-success="Saved!">Save</button>
        </div>
        <div class="alert div-error col-10">
          <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
          <p></p>
        </div>
      </form>
    </span>
    <span class="col-2"style="margin:6px 0">
      <form  method="POST" data-reload="true" action="{{url_for('do.delete_multi')}}" class="nice-form ajaxform">
        {{multi.csrf_token}}{{multi.multi}}
        <div class="col-1">
          <button type="submit" class="btn btn-orange" id="editmulti-btnsubmit" data-prog="Deleting..." data-success="Deleted!">Delete</button>
        </div>
        <div class="alert div-error col-10">
          <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
          <p></p>
        </div>
      </form>
    </span>
    {% endfor %}
  </div>
{% endif %}
{% endblock %}
