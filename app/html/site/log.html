@extends("shared/layout.html")
@require(logs, page)

@def content():
<div id="center-container">
    <div class="content">
        <h2>Site logs</h2>
        <table class="pure-table">
            <thead>
            <tr>
                <th>Time</th>
                <th>User</th>
                <th>Action</th>
                <th></th>
            </tr>
            </thead>
            <tbody>
            @for log in logs:
            <tr>
                <td>
                    <time-ago datetime="@{log.time.isoformat()}Z">@{log.time.isoformat()}</time-ago>
                </td>
                <td>
                    @if log.uid:
                        @if log.uid.status != 10:
                            <a href="/u/@{log.uid.name}">@{log.uid.name}</a>\
                        @else:
                            @{_('[Deleted]')}
                        @end
                    @end
                </td>
                <td>
                    @if log.action == 19:
                        Zabanoval(a) používateľa <a href="/u/@{log.desc!!e}">@{log.desc!!e}</a>
                    @elif log.action == 20:
                        Vytvoril(a) skupinu
                    @elif log.action == 30:
                        Skupina bola presunutá na @{log.desc}
                    @elif log.action == 24:
                        Pozval(a) moderovať používateľa <a href="/u/@{log.target.name}">@{log.target.name}</a>
                    @elif log.action == 26:
                        Odstránil(a) používateľa<a href="/u/@{log.target.name}">@{log.target.name}</a> from the mod team
                    @elif log.action == 27:
                        Stiahol(la) pozvanie moderovať pre <a href="/u/@{log.target.name}">@{log.target.name}</a>
                    @elif log.action == 52:
                        Vymazal(a) príspevok z dôvodu <code>@{log.desc!!e}</code>
                    @elif log.action == 53:
                        Vymazal(a) komentár z dôvodu <code>@{log.desc!!e}</code>
                    @elif log.action == 40:
                        Vytvoril(a) skupinu
                    @elif log.action == 41:
                        Vytvoril(a) oznam
                    @elif log.action == 42:
                        Zabanoval(a) doménu <code>@{log.desc!!e}</code>
                    @elif log.action == 43:
                        Odbanoval(a) doménu <code>@{log.desc!!e}</code>
                    @elif log.action == 44:
                        Odstránil(a) oznam
                    @elif log.action == 45:
                        Zakázal(a) prispievanie
                    @elif log.action == 46:
                        Povolil(a) prispievanie
                    @elif log.action == 47:
                        Zakázal(a) registrácie bez pozvánok
                    @elif log.action == 48:
                        Povolil(a) registrácie bez pozvánok
                    @else:
                        <i>[Type @{log.action!!s}]</i> @{log.desc}
                    @end
                </td>
                <td>
                    @if log.sub:
                        <a href="/s/@{log.sub}">/s/@{log.sub}</a> \
                    @end
                    @if log.link:
                        @if log.sub:
                            | \
                        @end
                        <a href="@{log.link}">Link</a>\
                    @end
                </td>
            </tr>
            @end
            </tbody>
        </table>
        @if page > 1:
        <a href="@{url_for('site.view_sitelog', page=(page-1))}" class="btn">prev</a>
        @end

        @if len(logs) == 50:
        <a href="@{url_for('site.view_sitelog', page=(page+1))}" class="btn">next</a>
        @end
    </div>
</div>
@end