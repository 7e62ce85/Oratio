<!DOCTYPE html>
<html>
  <head>
    {% block head %}
    <meta charset="utf-8">
    <meta name="keywords" content="forum, vote, comment, submit, throat, internet">
    <meta name="description" content="Throat: Open discussion">
    <meta name="robots" content="index, follow">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>{% block title %}{% endblock %}</title>

    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/magnific-popup.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/font-awesome.min.css') }}">
    {% endblock %}
  </head>
  <body>
    <div class="row">
      <header class="col-12">
        <nav id="navbar">
          <ul>
            <li><a href='#'><img id="logo" src="{{ url_for('static', filename='img/logo.png') }}" alt="Throat" height="30" width="100"></a></li>
            <li><a href="#">Hot</a></li>
            <li><a href="#">New</a></li>
            <li><a href="#">Active</a></li>
            {% block navbar %}{% endblock %}
          </ul>
        </nav>
      </header>
    </div>
    <div class="row content">
      <div class="col-3 side right">
        {% block sidebar %}
        <div style="text-align: left; margin: 0.5em;">
          <input type="search" name="search" placeholder="Search...">
        </div>
        <div class="row buttons">
        {% if 'user' not in session %}
          <div class="col-6">
            <a href="#login-form" class="btn login">Login</a>
          </div>
          <div class="col-6">
            <a href="#register-form" class="btn register">Register</a>
          </div>
        {% else %}
          <div class="col-10">
             <form method="POST" action="{{ url_for('do_logout') }}">
                 {{ logoutform.csrf_token }}
                 <button type="submit" class="btn">Log out</button>
             </form>
          </div>
          <div class="col-2" id="cfg">
            <a href="#config-form" class="config"><i class="fa fa-cog" aria-hidden="true"></i></a>
          </div>
          <div class="col-12">
            <a href="#mksub" class="btn btn-blue create-sub">Create your own sub</a>
          </div>
        {% endif %}
        </div>
        {% endblock %}
      </div>
      <main class="col-8 right">{% block content %}{% endblock %}</main>
    </div>
    <footer>
        {% block footer %}
        Copyright &copy;2016 Throat. All Rights Reserved.
        {% endblock %}
    </footer>
    {% if 'user' not in session %}
    <!-- login form -->
    <form id="login-form" class="mfp-hide white-popup-block">
    	<h1>Login</h1>
        {{ loginform.csrf_token }}
    	<p id="login-intro">Do you have an account?</p>
    	<p>{{loginform.username(placeholder=loginform.username.label.text, required=True, autofocus=True)}}</p>
    	<p>{{loginform.password(placeholder=loginform.password.label.text, required=True)}}</p>
        <div class="alert div-error">
          <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
          <p id="login-errors"></p>
        </div>
        <p><button type="submit" id="login-btnsubmit">Log in</button></p>
    </form>
    <!-- register form -->
    <form id="register-form" class="mfp-hide white-popup-block">
        <div id="the-register-form-itself">
            {{ regform.csrf_token }}
            <h1>Register</h1>
            <p>Registering is free. All you need is a username and password.</p>
            <p>{{regform.username(placeholder=regform.username.label.text, required=True, autofocus=True)}}</p>
            <p>{{regform.email(placeholder=regform.email.label.text, required=True)}}</p>
            <p>{{regform.password(placeholder=regform.password.label.text, required=True)}}</p>
            <p>{{regform.confirm(placeholder=regform.confirm.label.text, required=True)}}</p>
            <p>
                {{regform.accept_tos(style="width: auto", required=True)}}
                <label for="tos">{{regform.accept_tos.label.text}}</label>
            </p>
            <!-- TODO: Add a captcha -->
            <div class="alert div-error">
              <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
              <p id="reg-errors"></p>
            </div>
            <p><button type="submit" id="reg-btnsubmit">Register</button></p>
        </div>
    </form>
    {% endif %}
    <!-- create sub form -->
    <form id="mksub" class="mfp-hide white-popup-block">
      <!-- Insert stuff here -->
    </form>
    <!-- Scripts -->
    <script type="text/javascript" src="{{ url_for('static', filename='js/jquery-2.2.3.min.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='js/magnific-popup.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='js/site.js') }}"></script>
  </body>
</html>
