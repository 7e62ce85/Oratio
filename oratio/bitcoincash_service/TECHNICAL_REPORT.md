# Bitcoin Cash ê²°ì œ ì„œë¹„ìŠ¤ UI/UX ê°œì„  ë° ê¸°ìˆ ì  ë³´ê³ ì„œ

## ì‘ì—… ê°œìš”
Lemmy UIì˜ ë””ìì¸ ì‹œìŠ¤í…œì„ ì°¸ì¡°í•˜ì—¬ Bitcoin Cash ê²°ì œ ì„œë¹„ìŠ¤ì˜ ëª¨ë“  í…œí”Œë¦¿ì„ í˜„ëŒ€ì ì´ê³  ì¼ê´€ëœ UIë¡œ ê°œì„ í•˜ì˜€ìŠµë‹ˆë‹¤. ë˜í•œ ì‚¬ìš©ì ê²½í—˜ì„ í–¥ìƒì‹œí‚¤ê¸° ìœ„í•´ ë¶ˆí•„ìš”í•œ API ë¬¸ì„œë¥¼ ì œê±°í•˜ê³ , í™˜ë¶ˆ ë¶ˆê°€ ì •ì±…ì— ëŒ€í•œ ëª…í™•í•œ ê²½ê³  ì‹œìŠ¤í…œì„ ë„ì…í–ˆìŠµë‹ˆë‹¤.

## ì£¼ìš” ê°œì„  ì‚¬í•­

### 1. UI/UX ê°œì„  ì‚¬í•­

#### 1.1 ë””ìì¸ ì‹œìŠ¤í…œ í†µí•©
- **CSS ë³€ìˆ˜ ì‹œìŠ¤í…œ**: Lemmy UIì™€ ë™ì¼í•œ ìƒ‰ìƒ ì²´ê³„ ì ìš©
- **íƒ€ì´í¬ê·¸ë˜í”¼**: Apple ì‹œìŠ¤í…œ í°íŠ¸ ìŠ¤íƒ ì ìš© (-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto)
- **ì»´í¬ë„ŒíŠ¸ ì¼ê´€ì„±**: ì¹´ë“œ, ë²„íŠ¼, ì•Œë¦¼ ë“± UI ì»´í¬ë„ŒíŠ¸ ìŠ¤íƒ€ì¼ í†µì¼
- **ë°˜ì‘í˜• ë””ìì¸**: ëª¨ë°”ì¼ ìš°ì„  ì ‘ê·¼ë²•ìœ¼ë¡œ ë‹¤ì–‘í•œ í™”ë©´ í¬ê¸° ì§€ì›

#### 1.2 ë„¤ë¹„ê²Œì´ì…˜ ê°œì„ 
- **ìƒë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ë°”**: ëª¨ë“  í˜ì´ì§€ì— oratio ë¸Œëœë”© ì¼ê´€ì„± ìœ ì§€
- **ë¸Œë ˆë“œí¬ëŸ¼**: ì‚¬ìš©ì ìœ„ì¹˜ íŒŒì•… ë° ë„¤ë¹„ê²Œì´ì…˜ í–¥ìƒ
- **ëª…í™•í•œ CTA ë²„íŠ¼**: ì£¼ìš” ì•¡ì…˜ ë²„íŠ¼ ì‹œê°ì  ê°•ì¡°

#### 1.3 ì‚¬ìš©ì ê²½í—˜ ê°œì„ 
- **ì§ê´€ì ì¸ ìƒíƒœ í‘œì‹œ**: ë°°ì§€ ì‹œìŠ¤í…œìœ¼ë¡œ ê²°ì œ ìƒíƒœ ì‹œê°í™”
- **ì§„í–‰ ìƒí™© í‘œì‹œ**: ê²°ì œ ê³¼ì •ë³„ ëª…í™•í•œ ì•ˆë‚´
- **í–¥ìƒëœ í”¼ë“œë°±**: ë²„íŠ¼ ìƒíƒœ, ë¡œë”© ì¸ë””ì¼€ì´í„°, ì„±ê³µ/ì‹¤íŒ¨ ë©”ì‹œì§€

### 2. ë³´ì•ˆ ë° ì •ì±… ê°œì„ 

#### 2.1 í™˜ë¶ˆ ë¶ˆê°€ ì •ì±… ê°•í™”
- **ë©”ì¸ í˜ì´ì§€**: ìƒë‹¨ì— ëˆˆì— ë„ëŠ” ê²½ê³  ë°°ë„ˆ ì¶”ê°€
- **ê²°ì œ í˜ì´ì§€**: ê²°ì œ ì§„í–‰ ì „ ì¬í™•ì¸ ê²½ê³ 
- **ì™„ë£Œ í˜ì´ì§€**: ì •ì±… ì¬ì•ˆë‚´ ë° ì¦ë¹™ ìë£Œ ë³´ê´€ ì•ˆë‚´

#### 2.2 ì‚¬ìš©ì ì•ˆì „ ì¡°ì¹˜
- **ì£¼ì†Œ ë³µì‚¬ ê°œì„ **: í´ë¦½ë³´ë“œ API ì‚¬ìš©ìœ¼ë¡œ ì•ˆì „í•œ ì£¼ì†Œ ë³µì‚¬
- **QR ì½”ë“œ ìŠ¤íƒ€ì¼ë§**: ëª…í™•í•œ ìŠ¤ìº” ê°€ì´ë“œ ì œê³µ
- **íŠ¸ëœì­ì…˜ ì¶”ì **: Blockchair ë§í¬ë¡œ íˆ¬ëª…ì„± ì¦ëŒ€

### 3. ê°œë°œì ê²½í—˜ ê°œì„ 

#### 3.1 ì½”ë“œ êµ¬ì¡° ê°œì„ 
- **í…œí”Œë¦¿ ëª¨ë“ˆí™”**: ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ìŠ¤íƒ€ì¼ ì»´í¬ë„ŒíŠ¸
- **ì¼ê´€ëœ ë„¤ì´ë°**: í´ë˜ìŠ¤ëª…ê³¼ ID ì²´ê³„ í‘œì¤€í™”
- **ì£¼ì„ ê°œì„ **: ì½”ë“œ ê°€ë…ì„± ë° ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ

## ê¸°ìˆ ì  ë¶„ì„ ë° ê¶Œì¥ì‚¬í•­

### 1. ë°±ì—”ë“œ API í˜„í™© ë¶„ì„

#### 1.1 í˜„ì¬ API ì—”ë“œí¬ì¸íŠ¸
```
GET /api/user_credit/<user_id>     - ì‚¬ìš©ì í¬ë ˆë”§ ì¡°íšŒ (ID ê¸°ë°˜)
GET /api/user_credit/<username>    - ì‚¬ìš©ì í¬ë ˆë”§ ì¡°íšŒ (ì‚¬ìš©ìëª… ê¸°ë°˜)
GET /api/transactions/<user_id>    - ê±°ë˜ ë‚´ì—­ ì¡°íšŒ (ID ê¸°ë°˜)
GET /api/transactions/<username>   - ê±°ë˜ ë‚´ì—­ ì¡°íšŒ (ì‚¬ìš©ìëª… ê¸°ë°˜)
GET /health                        - ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
```

#### 1.2 ë³´ì•ˆ êµ¬í˜„ í˜„í™©
- **API í‚¤ ì¸ì¦**: X-API-Key í—¤ë” ê¸°ë°˜ ì¸ì¦ ì‹œìŠ¤í…œ
- **CORS ì„¤ì •**: í¬ë¡œìŠ¤ ì˜¤ë¦¬ì§„ ìš”ì²­ í—ˆìš©
- **ì˜¤ë¥˜ ì²˜ë¦¬**: ì „ì—­ ì˜ˆì™¸ ì²˜ë¦¬ê¸°ë¡œ ì•ˆì „í•œ ì˜¤ë¥˜ ì‘ë‹µ

### 2. ê¶Œì¥ ê°œì„ ì‚¬í•­

#### 2.1 ë³´ì•ˆ ê°•í™”
```python
# ê¶Œì¥: Rate Limiting ì¶”ê°€
from flask_limiter import Limiter
from flask_limiter.util import get_remote_address

limiter = Limiter(
    app,
    key_func=get_remote_address,
    default_limits=["200 per day", "50 per hour"]
)

@api_bp.route('/api/user_credit/<user_id>')
@limiter.limit("10 per minute")
@require_api_key
def get_user_credit_by_id(user_id):
    # ê¸°ì¡´ ì½”ë“œ...
```

#### 2.2 ë¡œê¹… ë° ëª¨ë‹ˆí„°ë§ ê°œì„ 
```python
# ê¶Œì¥: êµ¬ì¡°í™”ëœ ë¡œê¹…
import structlog

logger = structlog.get_logger()

@api_bp.route('/api/user_credit/<user_id>')
@require_api_key
def get_user_credit_by_id(user_id):
    logger.info("user_credit_request", user_id=user_id, 
                ip=request.remote_addr)
    # ê¸°ì¡´ ì½”ë“œ...
```

#### 2.3 ìºì‹± ì‹œìŠ¤í…œ ë„ì…
```python
# ê¶Œì¥: Redis ìºì‹±ìœ¼ë¡œ ì„±ëŠ¥ í–¥ìƒ
from flask_caching import Cache

cache = Cache(app, config={'CACHE_TYPE': 'RedisCache'})

@api_bp.route('/api/user_credit/<user_id>')
@cache.cached(timeout=300)  # 5ë¶„ ìºì‹œ
@require_api_key
def get_user_credit_by_id(user_id):
    # ê¸°ì¡´ ì½”ë“œ...
```

### 3. ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”

#### 3.1 í˜„ì¬ êµ¬ì¡° ë¶„ì„
- SQLite ê¸°ë°˜ ë‹¨ìˆœ êµ¬ì¡°
- ê¸°ë³¸ì ì¸ CRUD ì—°ì‚° ì§€ì›
- íŠ¸ëœì­ì…˜ ë¬´ê²°ì„± ë³´ì¥

#### 3.2 ê¶Œì¥ ê°œì„ ì‚¬í•­
```sql
-- ì¸ë±ìŠ¤ ì¶”ê°€ë¡œ ì„±ëŠ¥ í–¥ìƒ
CREATE INDEX idx_invoices_user_id ON invoices(user_id);
CREATE INDEX idx_invoices_status ON invoices(status);
CREATE INDEX idx_invoices_created_at ON invoices(created_at);

-- íŒŒí‹°ì…”ë‹ ê³ ë ¤ (ëŒ€ìš©ëŸ‰ ë°ì´í„° ì‹œ)
CREATE TABLE invoices_2025 PARTITION OF invoices 
FOR VALUES FROM ('2025-01-01') TO ('2026-01-01');
```

### 4. í™•ì¥ì„± ê³ ë ¤ì‚¬í•­

#### 4.1 ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ ì¤€ë¹„
```python
# ê¶Œì¥: ì„œë¹„ìŠ¤ ë¶„ë¦¬ ì¤€ë¹„
class PaymentService:
    def __init__(self, config):
        self.config = config
        self.electron_cash = ElectronCashService(config)
    
    def create_invoice(self, amount, user_id):
        # ì¸ë³´ì´ìŠ¤ ìƒì„± ë¡œì§
        pass
    
    def process_payment(self, invoice_id):
        # ê²°ì œ ì²˜ë¦¬ ë¡œì§
        pass
```

#### 4.2 API ë²„ì „ ê´€ë¦¬
```python
# ê¶Œì¥: API ë²„ì „ ê´€ë¦¬
api_v1 = Blueprint('api_v1', __name__, url_prefix='/api/v1')
api_v2 = Blueprint('api_v2', __name__, url_prefix='/api/v2')

@api_v1.route('/user_credit/<user_id>')
def get_user_credit_v1(user_id):
    # V1 êµ¬í˜„
    pass

@api_v2.route('/user_credit/<user_id>')
def get_user_credit_v2(user_id):
    # V2 êµ¬í˜„ (í–¥ìƒëœ ì‘ë‹µ í˜•ì‹)
    pass
```

## í™˜ê²½ ë³€ìˆ˜ ë° ì„¤ì • ê´€ë¦¬

### ê¶Œì¥ ì„¤ì • êµ¬ì¡°
```python
# config.py ê°œì„  ê¶Œì¥ì‚¬í•­
import os
from dataclasses import dataclass
from typing import Optional

@dataclass
class Config:
    # ê¸°ë³¸ ì„¤ì •
    FLASK_ENV: str = os.getenv('FLASK_ENV', 'production')
    SECRET_KEY: str = os.getenv('FLASK_SECRET_KEY', 'your-secret-key')
    
    # ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
    DATABASE_URL: str = os.getenv('DATABASE_URL', 'sqlite:///data/payment.db')
    
    # Bitcoin Cash ì„¤ì •
    BCH_TESTNET: bool = os.getenv('BCH_TESTNET', 'False').lower() == 'true'
    MIN_CONFIRMATIONS: int = int(os.getenv('MIN_CONFIRMATIONS', '1'))
    
    # ë³´ì•ˆ ì„¤ì •
    API_KEY: str = os.getenv('LEMMY_API_KEY')
    RATE_LIMIT_ENABLED: bool = os.getenv('RATE_LIMIT_ENABLED', 'True').lower() == 'true'
    
    # ë¡œê¹… ì„¤ì •
    LOG_LEVEL: str = os.getenv('LOG_LEVEL', 'INFO')
    LOG_FILE: Optional[str] = os.getenv('LOG_FILE')
```

## ì„±ëŠ¥ ìµœì í™” ê¶Œì¥ì‚¬í•­

### 1. í”„ë¡ íŠ¸ì—”ë“œ ìµœì í™”
```javascript
// ê¶Œì¥: ë¹„ë™ê¸° ì²˜ë¦¬ ê°œì„ 
async function checkPaymentWithRetry(invoiceId, maxRetries = 3) {
    for (let attempt = 1; attempt <= maxRetries; attempt++) {
        try {
            const response = await fetch(`/check_payment/${invoiceId}`);
            if (response.ok) {
                return await response.json();
            }
        } catch (error) {
            if (attempt === maxRetries) throw error;
            await new Promise(resolve => setTimeout(resolve, 1000 * attempt));
        }
    }
}
```

### 2. ë°±ì—”ë“œ ìµœì í™”
```python
# ê¶Œì¥: ë¹„ë™ê¸° ì²˜ë¦¬ ë„ì…
import asyncio
import aiohttp

async def check_blockchain_async(tx_hash):
    async with aiohttp.ClientSession() as session:
        async with session.get(f"https://api.blockchair.com/bitcoin-cash/transaction/{tx_hash}") as response:
            return await response.json()
```

## ë³´ì•ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì™„ë£Œëœ í•­ëª©
- âœ… í™˜ë¶ˆ ë¶ˆê°€ ì •ì±… ëª…ì‹œ
- âœ… API í‚¤ ì¸ì¦ ì‹œìŠ¤í…œ
- âœ… ì „ì—­ ì˜ˆì™¸ ì²˜ë¦¬
- âœ… ì•ˆì „í•œ ì£¼ì†Œ ë³µì‚¬ ê¸°ëŠ¥

### ê¶Œì¥ ì¶”ê°€ í•­ëª©
- ğŸ”² Rate Limiting êµ¬í˜„
- ğŸ”² Request ë¡œê¹… ë° ëª¨ë‹ˆí„°ë§
- ğŸ”² SSL/TLS ì¸ì¦ì„œ ìë™ ê°±ì‹ 
- ğŸ”² API ì‘ë‹µ ë°ì´í„° ê²€ì¦
- ğŸ”² ë°ì´í„°ë² ì´ìŠ¤ ì•”í˜¸í™”

## ë°°í¬ ë° ìš´ì˜ ê¶Œì¥ì‚¬í•­

### 1. Docker ì»¨í…Œì´ë„ˆ ìµœì í™”
```dockerfile
# ê¶Œì¥: ë©€í‹°ìŠ¤í…Œì´ì§€ ë¹Œë“œ
FROM python:3.9-slim AS builder
WORKDIR /app
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

FROM python:3.9-slim
WORKDIR /app
COPY --from=builder /usr/local/lib/python3.9/site-packages /usr/local/lib/python3.9/site-packages
COPY . .
CMD ["gunicorn", "--bind", "0.0.0.0:8081", "app:app"]
```

### 2. ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ
```python
# ê¶Œì¥: í—¬ìŠ¤ì²´í¬ ì—”ë“œí¬ì¸íŠ¸ í™•ì¥
@api_bp.route('/health/detailed')
def detailed_health_check():
    health_status = {
        "status": "ok",
        "timestamp": datetime.now().isoformat(),
        "services": {
            "database": check_database_health(),
            "electron_cash": check_electron_cash_health(),
            "blockchain": check_blockchain_connectivity()
        }
    }
    return jsonify(health_status)
```

## ê²°ë¡ 

ì´ë²ˆ UI/UX ê°œì„ ì„ í†µí•´ ì‚¬ìš©ì ê²½í—˜ì´ í¬ê²Œ í–¥ìƒë˜ì—ˆìœ¼ë©°, íŠ¹íˆ í™˜ë¶ˆ ë¶ˆê°€ ì •ì±…ì— ëŒ€í•œ ëª…í™•í•œ ì•ˆë‚´ë¡œ ì‚¬ìš©ì ë³´í˜¸ê°€ ê°•í™”ë˜ì—ˆìŠµë‹ˆë‹¤. ë°±ì—”ë“œ APIëŠ” í˜„ì¬ ì•ˆì •ì ìœ¼ë¡œ ì‘ë™í•˜ê³  ìˆìœ¼ë‚˜, í™•ì¥ì„±ê³¼ ë³´ì•ˆì„ ìœ„í•´ ì œì•ˆëœ ê°œì„ ì‚¬í•­ë“¤ì„ ë‹¨ê³„ì ìœ¼ë¡œ ë„ì…í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.

### ìš°ì„ ìˆœìœ„ ê¶Œì¥ì‚¬í•­
1. **ì¦‰ì‹œ ì ìš©**: Rate Limiting, êµ¬ì¡°í™”ëœ ë¡œê¹…
2. **ë‹¨ê¸° ê³„íš**: ìºì‹± ì‹œìŠ¤í…œ, ë°ì´í„°ë² ì´ìŠ¤ ì¸ë±ìŠ¤
3. **ì¥ê¸° ê³„íš**: ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜, API ë²„ì „ ê´€ë¦¬

ì´ëŸ¬í•œ ê°œì„ ì‚¬í•­ë“¤ì„ í†µí•´ ë”ìš± ì•ˆì •ì ì´ê³  í™•ì¥ ê°€ëŠ¥í•œ Bitcoin Cash ê²°ì œ ì„œë¹„ìŠ¤ë¥¼ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
